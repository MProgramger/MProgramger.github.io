<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hmprogramer.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="不积跬步，无以至千里">
<meta property="og:type" content="website">
<meta property="og:title" content="hm_programer">
<meta property="og:url" content="https://hmprogramer.github.io/page/3/index.html">
<meta property="og:site_name" content="hm_programer">
<meta property="og:description" content="不积跬步，无以至千里">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hm">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hmprogramer.github.io/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>hm_programer</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">hm_programer</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学无止境</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">3</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">5</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">27</span></a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hm</p>
  <div class="site-description" itemprop="description">不积跬步，无以至千里</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/hello-world8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/hello-world8/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-27 19:51:06" itemprop="dateCreated datePublished" datetime="2023-09-27T19:51:06+08:00">2023-09-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/hello-world7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/hello-world7/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-27 19:51:02" itemprop="dateCreated datePublished" datetime="2023-09-27T19:51:02+08:00">2023-09-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/Elastic-Job%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/Elastic-Job%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/" class="post-title-link" itemprop="url">Elastic Job常见面试题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-09-27 19:29:19 / 修改时间：20:16:47" itemprop="dateCreated datePublished" datetime="2023-09-27T19:29:19+08:00">2023-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E8%B0%83%E5%BA%A6/" itemprop="url" rel="index"><span itemprop="name">分布式调度</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="1-Elastic-Job-的失效转移-故障转移-机制是怎样的？"><a href="#1-Elastic-Job-的失效转移-故障转移-机制是怎样的？" class="headerlink" title="1 Elastic Job 的失效转移-故障转移-机制是怎样的？"></a>1 Elastic Job 的失效转移-故障转移-机制是怎样的？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">具备故障转移和重试的能力，能够自动进行故障恢复，确保任务的稳定运行。</span><br><span class="line">底层原理是怎么样的？</span><br><span class="line">底层实现原理就是：Elasticjob的故障恢复机制是通过分布式协调服务-zookeeper和任务节点监听来实现</span><br><span class="line">具体来看就是 每个任务节点再启动的时候都会在zookeeper上创建对应的临时节点，并在该节点上注册一个监听器，当任务节点发生</span><br><span class="line">故障或宕机时，临时节点会被删除，并触发监听器的回调</span><br><span class="line">而其他正常运行的任务节点会收到故障节点的通知，根据根据故障节点的信息，ElasticJob会重新分配故障节点上的任务片段给其他可用的节点，实现任务的故障转移。</span><br><span class="line">而我们可以在配置文件中显示的去开启失效转移--即配置中有个failover属性</span><br><span class="line">failover: 定义是否开启失效转移功能，默认为<span class="literal">false</span>，表示不开启失效转移。</span><br><span class="line">maxFailoverCount: 定义最大失效转移次数，默认为0，表示不限制失效转移次数。</span><br></pre></td></tr></table></figure>



<h3 id="2-Elastic-Job-的分片机制是如何实现的？"><a href="#2-Elastic-Job-的分片机制是如何实现的？" class="headerlink" title="2 Elastic Job 的分片机制是如何实现的？"></a>2 Elastic Job 的分片机制是如何实现的？</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">首先我们在使用上可以灵活配置作业的分片数， 比如要处理的数据量比较多时可以多加些分片，而在数据量少的时候可以降低分片数量</span><br><span class="line">通过配置shardingParams（分片项）参数和shardingCount分片数量</span><br><span class="line">ElasticJob将一个任务分成多个独立的子任务，每个子任务负责处理一部分数据或者执行一段逻辑。任务分片可以通过配置来指定，也可以根据数据分片算法自动计算，分片数决定了任务被拆分成多少个独立的子任务。</span><br><span class="line">ElasticJob的分片机制是通过将任务数据划分为多个片（shard），并由多个线程并行处理来实现的。每个分片只会被一个线程处理，避免了多个线程处理相同数据的问题。</span><br><span class="line">具体的实现原理如下：</span><br><span class="line">任务分片：</span><br><span class="line">ElasticJob首先根据配置的分片数目将任务数据进行分片。可以使用预定义的分片策略（如平均分配、轮询分配、一致性哈希分配等），也可以自定义分片策略。每个分片包含一部分任务数据。</span><br><span class="line">分片分配：</span><br><span class="line">ElasticJob使用分布式协调服务（如ZooKeeper）来进行分片的动态分配和管理。当任务启动时，各个任务节点会通过分布式协调服务竞争获取可用的分片。每个任务节点会负责处理分配给它的分片。</span><br><span class="line">并行处理：</span><br><span class="line">每个任务节点在获取到分片后，会创建对应数量的线程来并行处理分片中的任务数据。每个线程只会处理属于自己分片的任务数据，避免了重复处理的问题。这样可以提高任务的执行效率和并发能力。</span><br></pre></td></tr></table></figure>





<h3 id="3-Elastic-Job-任务错过机制-misfire"><a href="#3-Elastic-Job-任务错过机制-misfire" class="headerlink" title="3 Elastic Job 任务错过机制(misfire)"></a>3 Elastic Job 任务错过机制(misfire)</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">misfire的正确用法是用于处理间隔时间长的作业，或者业务有局限的作业。举个例子：</span><br><span class="line"></span><br><span class="line">1天跑一次的报表作业，作业的业务逻辑中写死本次作业只抓取昨天的数据。那么一旦上次作业跑动超过一天，那么第二天本该运行的作业就失去了运行的机会，第二天的数据也会缺失。因此需要misfire。</span><br><span class="line">如果业务写的足够好，比如，无论哪天跑都能把未处理的数据分好组生成报表，misfire的存在意义就仅仅是触发时间缩短而已了</span><br><span class="line">而misfire的默认配置为 忽略错过的触发时间，直接执行下一次调度</span><br><span class="line"></span><br><span class="line">具体的配置有</span><br><span class="line">ElasticJob提供了多种任务错过处理策略，如MISFIRE_IGNORE_MISFIRES、MISFIRE_FIRE_AND_PROCEED和MISFIRE_DO_NOTHING。</span><br><span class="line"></span><br><span class="line">MISFIRE_IGNORE_MISFIRES是默认的处理策略，表示忽略错过的触发时间，直接执行下一次调度。</span><br><span class="line"></span><br><span class="line">MISFIRE_FIRE_AND_PROCEED表示错过的触发时间立即执行，然后按照原定的调度频率继续执行。</span><br><span class="line"></span><br><span class="line">MISFIRE_DO_NOTHING表示错过的触发时间不执行，等待下一次调度。</span><br><span class="line"></span><br><span class="line">开发者可以根据实际需求选择合适的任务错过处理策略。</span><br></pre></td></tr></table></figure>



<h3 id="4-ElasticJob如何确保在同一个Job实例中多个线程不会处理相同的数据"><a href="#4-ElasticJob如何确保在同一个Job实例中多个线程不会处理相同的数据" class="headerlink" title="4  ElasticJob如何确保在同一个Job实例中多个线程不会处理相同的数据"></a>4  ElasticJob如何确保在同一个Job实例中多个线程不会处理相同的数据</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在ElasticJob中，确保在同一个<span class="keyword">Job实例中多个线程不会处理相同的数据是通过分片（Sharding）策略和分布式锁来实现的。</span></span><br><span class="line"><span class="keyword"></span>分片（<span class="keyword">Sharding）策略：</span></span><br><span class="line"><span class="keyword"></span>ElasticJob将任务的数据划分为多个片（<span class="keyword">Shard），每个片由一个线程处理。</span></span><br><span class="line"><span class="keyword"></span>分片策略可以根据业务需求进行配置，例如按照数据ID、时间范围等方式进行划分。</span><br><span class="line">每个线程只处理自己负责的片，从而避免了多个线程处理相同的数据。</span><br><span class="line"></span><br><span class="line">分布式锁：</span><br><span class="line">ElasticJob使用分布式锁来保证同一时间只有一个线程能够获取到任务片并执行。</span><br><span class="line">当一个线程获取到分布式锁后，其他线程无法获取到同样的锁，从而避免了多个线程同时处理相同的数据。</span><br><span class="line">通过分片策略和分布式锁的组合，ElasticJob能够确保在同一个<span class="keyword">Job实例中多个线程不会处理相同的数据。每个线程只处理自己负责的片，并且在处理之前先获取到分布式锁，确保同一时间只有一个线程能够处理该片的数据。</span></span><br></pre></td></tr></table></figure>

<h3 id="5-什么是ElasticJob？它的主要特点是什么？"><a href="#5-什么是ElasticJob？它的主要特点是什么？" class="headerlink" title="5 什么是ElasticJob？它的主要特点是什么？"></a>5 什么是ElasticJob？它的主要特点是什么？</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ElasticJob是一个分布式任务调度框架，用于处理大规模任务调度。它的主要特点包括灵活性、分布式能力和扩展性。</span><br><span class="line">灵活性：</span><br><span class="line">ElasticJob支持多种任务调度策略，如简单调度、Cron表达式调度等，可以根据不同的业务需求选择合适的调度方式。</span><br><span class="line">支持任务错过机制（misfire），可以根据配置的策略处理错过的触发时间，保证任务的连续性和正确性。</span><br><span class="line">提供了丰富的作业监听器和事件机制，开发者可以通过监听器来实现自定义的业务逻辑，增加灵活性。</span><br><span class="line"></span><br><span class="line">分布式能力：</span><br><span class="line">ElasticJob是一个分布式任务调度框架，可以在分布式环境下运行和管理任务。</span><br><span class="line">支持任务分片（<span class="keyword">Sharding）策略，将任务数据划分为多个片，每个片由一个线程处理，从而实现任务的并行执行。</span></span><br><span class="line"><span class="keyword"></span>通过分布式协调服务（如ZooKeeper）来实现任务的分布式协调和管理，确保任务的一致性和可靠性。</span><br><span class="line"></span><br><span class="line">扩展性：</span><br><span class="line">ElasticJob提供了丰富的扩展点和插件机制，可以方便地进行功能扩展和定制化开发。</span><br><span class="line">支持自定义作业类型，开发者可以根据自己的需求实现自定义的作业类型，扩展框架的功能。</span><br><span class="line">提供了作业监听器和事件机制，开发者可以通过监听器来实现自定义的业务逻辑，增加框架的灵活性和可扩展性。</span><br><span class="line">总之，ElasticJob具有灵活性、分布式能力和扩展性。它提供了多种任务调度策略、支持任务错过处理、具备分布式能力和分片策略，同时还提供了丰富的扩展点和插件机制，使开发者能够根据不同的需求进行定制化开发和功能扩展。这些特点使得ElasticJob成为一个强大而灵活的分布式任务调度框架。</span><br></pre></td></tr></table></figure>

<h3 id="6-ElasticJob多种任务调度策略对比"><a href="#6-ElasticJob多种任务调度策略对比" class="headerlink" title="6  ElasticJob多种任务调度策略对比"></a>6  ElasticJob多种任务调度策略对比</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ElasticJob提供了多种任务调度策略，每种策略都有不同的特点和适用场景。下面是几种常见的任务调度策略及其区别：</span><br><span class="line"></span><br><span class="line">SimpleJobScheduler（简单调度器）：</span><br><span class="line">简单调度器是最基本的调度策略，按照固定的时间间隔执行任务。</span><br><span class="line">适用于需要按照一定频率重复执行的简单任务。</span><br><span class="line"></span><br><span class="line">CronJobScheduler（Cron表达式调度器）：</span><br><span class="line">Cron表达式调度器根据Cron表达式来指定任务的执行时间。</span><br><span class="line">可以实现更灵活的调度策略，如每天固定时间执行、每周某天执行等。</span><br><span class="line">适用于需要按照特定时间规则执行的任务。</span><br><span class="line"></span><br><span class="line">DataflowJobScheduler（数据流调度器）：</span><br><span class="line">数据流调度器适用于处理数据流的任务，它会根据分片策略将任务数据划分为多个片，并由多个线程并行处理。</span><br><span class="line">每个分片只会被一个线程处理，避免了多个线程处理相同数据的问题。--zookeeper分布式锁</span><br><span class="line">适用于需要并行处理大量数据的任务。</span><br><span class="line"></span><br><span class="line"><span class="keyword">ScriptJobScheduler（脚本调度器）：</span></span><br><span class="line"><span class="keyword"></span>脚本调度器可以通过配置脚本来执行任务，支持<span class="keyword">Shell脚本和JavaScript脚本。</span></span><br><span class="line"><span class="keyword"></span>可以灵活地执行各种自定义的脚本任务。</span><br><span class="line"></span><br><span class="line">这些任务调度策略在ElasticJob中提供了不同的调度方式，可以根据具体的业务需求选择合适的策略。简单调度器和Cron表达式调度器适用于按照固定时间间隔或特定时间规则执行任务；数据流调度器适用于并行处理大量数据的任务；脚本调度器适用于执行自定义的脚本任务。根据实际情况选择合适的任务调度策略，可以更好地满足业务需求。</span><br></pre></td></tr></table></figure>

<h3 id="7-ElasticJob的高可用性是如何保证的？"><a href="#7-ElasticJob的高可用性是如何保证的？" class="headerlink" title="7 ElasticJob的高可用性是如何保证的？"></a>7 ElasticJob的高可用性是如何保证的？</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ElasticJob通过使用分布式协调服务、主从模式、任务分片和并行处理等机制来保证高可用性。这些特性使得任务能够持续执行，并且在节点故障时能够自动切换和恢复。</span><br><span class="line"></span><br><span class="line">ElasticJob通过以下方式来保证高可用性：</span><br><span class="line">分布式协调服务：ElasticJob使用分布式协调服务（如ZooKeeper）来实现任务的分布式协调和管理。分布式协调服务可以提供高可用的集群环境，确保任务的一致性和可靠性。</span><br><span class="line"></span><br><span class="line">主从模式：ElasticJob采用主从模式来保证任务的高可用性。在一个分布式环境中，多个作业节点会竞争执行任务，其中一个节点会被选举为主节点，负责任务的调度和管理，其他节点则作为从节点备份主节点的状态信息。当主节点发生故障时，从节点会接管主节点的工作，保证任务的持续执行。</span><br><span class="line"></span><br><span class="line">任务分片：ElasticJob支持将任务数据划分为多个片，并由多个线程并行处理。每个分片只会被一个线程处理，避免了多个线程处理相同数据的问题。这种分片机制可以提高任务的并发性和可用性，即使某个节点发生故障，其他节点仍然可以继续处理剩余的分片。</span><br><span class="line"></span><br><span class="line">任务错过处理：ElasticJob支持任务错过机制（misfire），可以根据配置的策略处理错过的触发时间。当任务因为某些原因未能按时触发时，可以根据配置的策略来处理错过的任务，保证任务的连续性和正确性。</span><br><span class="line"></span><br><span class="line">通过以上机制，ElasticJob能够实现高可用性的任务调度。分布式协调服务提供了可靠的集群环境，主从模式保证了任务的持续执行，任务分片提高了任务的并发性和可用性，任务错过处理保证了任务的连续性。这些特性使得ElasticJob成为一个具有高可用性的分布式任务调度框架。</span><br></pre></td></tr></table></figure>

<h3 id="8-ElasticJob的扩展点有哪些？如何自定义扩展？"><a href="#8-ElasticJob的扩展点有哪些？如何自定义扩展？" class="headerlink" title="8 ElasticJob的扩展点有哪些？如何自定义扩展？"></a>8 ElasticJob的扩展点有哪些？如何自定义扩展？</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ElasticJob提供了多个扩展点，如任务执行器、作业监听器、分片策略等。可以通过实现相应的接口或继承相应的类来自定义扩展，并在配置中进行相应的设置。</span><br></pre></td></tr></table></figure>

<h3 id="9-ElasticJob的任务失败重试机制是如何实现的？"><a href="#9-ElasticJob的任务失败重试机制是如何实现的？" class="headerlink" title="9 ElasticJob的任务失败重试机制是如何实现的？"></a>9 ElasticJob的任务失败重试机制是如何实现的？</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ElasticJob的任务失败重试机制可以通过配置jobProperties属性来设置。可以指定最大重试次数和重试间隔时间，当任务执行失败时，会自动进行重试。</span><br></pre></td></tr></table></figure>



<h3 id="10-ElasticJob与其他任务调度框架（如Quartz）相比有什么优势？"><a href="#10-ElasticJob与其他任务调度框架（如Quartz）相比有什么优势？" class="headerlink" title="10. ElasticJob与其他任务调度框架（如Quartz）相比有什么优势？"></a>10. ElasticJob与其他任务调度框架（如Quartz）相比有什么优势？</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">答案：相比于其他任务调度框架，ElasticJob具有更好的分布式能力和高可用性，能够处理大规模任务调度，并且提供了丰富的扩展点和插件机制，可以满足不同场景的需求。</span><br><span class="line"></span><br><span class="line">我们维护的elasticjob修复了原先版本的一些bug，这些bug包括幂等，</span><br><span class="line"></span><br><span class="line">以及作业失效转移面向的是所有作业节点关闭逻辑，不仅限于作业崩溃关闭，这块做了优化，只针对作业崩溃的节点</span><br><span class="line"></span><br><span class="line">之后再原有的分片策略，平均分配，轮训分配，一致性哈希分配，随机分配的基础上又加了</span><br><span class="line"></span><br><span class="line">根据作业名的哈希值对服务器列表进行轮转的分片策略</span><br><span class="line"></span><br><span class="line">RotateServerByNameJobShardingStrategy，根据作业名的哈希值对作业节点列表进行轮转的分片策略。这里的轮转怎么定义呢？如果有 3 台作业节点，顺序为 <span class="comment">[0, 1, 2]</span>，如果作业名的哈希值根据作业分片总数取模为 1, 作业节点顺序变为 <span class="comment">[1, 2, 0]</span>。</span><br><span class="line"></span><br><span class="line">分片的目的，是将作业的负载合理的分配到不同的作业节点上，要避免分片策略总是让固定的作业节点负载特别大，其它工作节点负载特别小。这个也是为什么官方对比 RotateServerByNameJobShardingStrategy、AverageAllocationJobShardingStrategy</span><br><span class="line"></span><br><span class="line">AverageAllocationJobShardingStrategy的缺点是，一旦分片数小于作业作业节点数，作业将永远分配至IP地址靠前的作业节点，导致IP地址靠后的作业节点空闲。如：</span><br><span class="line"></span><br><span class="line">OdevitySortByNameJobShardingStrategy则可以根据作业名称重新分配作业节点负载。</span><br><span class="line"></span><br><span class="line">如果有3台作业节点，分成2片，作业名称的哈希值为奇数，则每台作业节点分到的分片是：1=<span class="comment">[0]</span>, 2=<span class="comment">[1]</span>, 3=<span class="comment">[]</span></span><br><span class="line"></span><br><span class="line">如果有3台作业节点，分成2片，作业名称的哈希值为偶数，则每台作业节点分到的分片是：3=<span class="comment">[0]</span>, 2=<span class="comment">[1]</span>, 1=<span class="comment">[]</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">二分算法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-27 19:29:19" itemprop="dateCreated datePublished" datetime="2023-09-27T19:29:19+08:00">2023-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-28 10:38:51" itemprop="dateModified" datetime="2023-09-28T10:38:51+08:00">2023-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E4%BA%8C%E5%88%86%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">二分算法</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>二分法的时间复杂度为logN一个数除以2 ，也可以用N&gt;&gt;2表示  同时位运算比除法快的</p>
<h2 id="二分法"><a href="#二分法" class="headerlink" title="二分法"></a>二分法</h2><h3 id="求一个数组中是否存在某个数"><a href="#求一个数组中是否存在某个数" class="headerlink" title="求一个数组中是否存在某个数"></a>求一个数组中是否存在某个数</h3><h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><p>​	基于while循环 不断地进行二分查找 来确定数组中是否存在目标数</p>
<p>​		</p>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">exist</span><span class="params">(<span class="type">int</span>[] sortedArr, <span class="type">int</span> num)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (sortedArr == <span class="literal">null</span> || sortedArr.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">   <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> sortedArr.length - <span class="number">1</span>;</span><br><span class="line">   <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">   <span class="comment">// L..R</span></span><br><span class="line">   <span class="keyword">while</span> (L &lt; R) &#123; <span class="comment">// L..R 至少两个数的时候</span></span><br><span class="line">      mid = L + ((R - L) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">if</span> (sortedArr[mid] == num) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sortedArr[mid] &gt; num) &#123;</span><br><span class="line">         R = mid - <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         L = mid + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> sortedArr[L] == num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="求局部最小值"><a href="#求局部最小值" class="headerlink" title="求局部最小值"></a>求局部最小值</h3><h4 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h4><p>​	如果存在局部最小值，可能有三种情况</p>
<p>​	1： 0位置数字小于1位置，那么可以找到一个局部最小值 就是0位置数</p>
<p>​    2：倒数最后一位数字小于倒数第二位数，那么可以找到一个局部最小值 就是倒数最后一位数</p>
<p>​    3：如果局部最小值在中间的某个位置那么这个数的趋势一定是开始往下， 而在中间的某个位置又往上，针对这种情况我们需要通过二分算法，不断地逼近这个局部最小值</p>
<p>​		</p>
<h4 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getLessIndex</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (arr == <span class="literal">null</span> || arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (arr.length == <span class="number">1</span> || arr[<span class="number">0</span>] &lt; arr[<span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">if</span> (arr[arr.length - <span class="number">1</span>] &lt; arr[arr.length - <span class="number">2</span>]) &#123;</span><br><span class="line">      <span class="keyword">return</span> arr.length - <span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">   <span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> arr.length - <span class="number">2</span>;</span><br><span class="line">   <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">      mid = (left + right) / <span class="number">2</span>;</span><br><span class="line">      <span class="keyword">if</span> (arr[mid] &gt; arr[mid - <span class="number">1</span>]) &#123;</span><br><span class="line">         right = mid - <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &gt; arr[mid + <span class="number">1</span>]) &#123;</span><br><span class="line">         left = mid + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> mid;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="在arr上，找满足-value的最左位置"><a href="#在arr上，找满足-value的最左位置" class="headerlink" title="在arr上，找满足&gt;&#x3D;value的最左位置"></a>在arr上，找满足&gt;&#x3D;value的最左位置</h3><h4 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h4><p>通过二分算法解题	</p>
<h4 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">nearestIndex</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">// 记录最左的对号</span></span><br><span class="line">		<span class="keyword">while</span> (L &lt;= R) &#123; <span class="comment">// 至少一个数的时候</span></span><br><span class="line">			<span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> L + ((R - L) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span> (arr[mid] &gt;= value) &#123;</span><br><span class="line">				index = mid;</span><br><span class="line">				R = mid - <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				L = mid + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> index;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>



<h3 id="在arr上，找满足"><a href="#在arr上，找满足" class="headerlink" title="在arr上，找满足&lt;&#x3D;value的最右位置"></a>在arr上，找满足&lt;&#x3D;value的最右位置</h3><h4 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h4><p>通过二分算法解题	</p>
<h4 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">nearestIndex</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">		<span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> arr.length - <span class="number">1</span>;</span><br><span class="line">		<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">// 记录最右的对号</span></span><br><span class="line">		<span class="keyword">while</span> (L &lt;= R) &#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> L + ((R - L) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span> (arr[mid] &lt;= value) &#123;</span><br><span class="line">				index = mid;</span><br><span class="line">				L = mid + <span class="number">1</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				R = mid - <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> index;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/MWebLibrary/docs/16958134162699/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/MWebLibrary/docs/16958134162699/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-27 19:16:56" itemprop="dateCreated datePublished" datetime="2023-09-27T19:16:56+08:00">2023-09-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id><a href="#" class="headerlink" title></a></h1>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/27/MWebLibrary/docs/16958133566833/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/27/MWebLibrary/docs/16958133566833/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-27 19:15:56" itemprop="dateCreated datePublished" datetime="2023-09-27T19:15:56+08:00">2023-09-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="欢迎使用-MWeb"><a href="#欢迎使用-MWeb" class="headerlink" title="欢迎使用 MWeb"></a>欢迎使用 MWeb</h1><p>MWeb 是一款功能很全面的 Markdown 编辑，笔记和发布软件。目前已支持 macOS&#x2F;iPadOS&#x2F;iOS 三个平台，并针对每个平台做了深度优化，macOS 版的 MWeb Pro 还有静态网站生成功能。所以，MWeb 算是比较复杂的软件了。因此，开始使用 MWeb 前，建议先阅读使用文档。请使用菜单：“帮助 - 使用文档” 来阅读使用文档。</p>
<h2 id="帮助我们改进-MWeb"><a href="#帮助我们改进-MWeb" class="headerlink" title="帮助我们改进 MWeb"></a>帮助我们改进 MWeb</h2><p>如果你喜欢 MWeb，想让它变得更好，你可以：</p>
<ol>
<li>推荐 MWeb，让更多的人知道。</li>
<li>给我们发反馈和建议：<a href="mailto:&#99;&#x6f;&#100;&#101;&#114;&#102;&#111;&#x72;&#x61;&#114;&#116;&#43;&#x32;&#51;&#51;&#x33;&#64;&#x67;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#99;&#x6f;&#100;&#101;&#114;&#102;&#111;&#x72;&#x61;&#114;&#116;&#43;&#x32;&#51;&#51;&#x33;&#64;&#x67;&#109;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a></li>
<li>在 Mac App Store 上评价 （如果是在 MAS 上购买的话）。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hmprogramer.github.io/2023/09/25/test-image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hm">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hm_programer">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hm_programer">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2023/09/25/test-image/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-09-25 12:43:45" itemprop="dateCreated datePublished" datetime="2023-09-25T12:43:45+08:00">2023-09-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-09-28 10:59:46" itemprop="dateModified" datetime="2023-09-28T10:59:46+08:00">2023-09-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br><span class="line">![图片](/images/girl.jpeg <span class="string">&quot;甘雨&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">hm</span>
  </div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
